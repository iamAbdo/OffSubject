<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>ุฎุงุฑุฌ ุงูููุถูุน - ูุนุจุฉ</title>
  <style>
    /* mobile-friendly layout */
    :root { --primary: #0b84ff; --accent: #0a66d1; --bg: #f3f6fb; }
    html,body { height:100%; margin:0; font-family: "Tahoma", sans-serif; background:var(--bg); -webkit-tap-highlight-color: transparent; }
    .hidden { display: none !important; } /* <-- fixes the "start does nothing" bug */
    .wrap {
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      padding:4vw;
      box-sizing:border-box;
    }

    h1 { font-size:6.5vw; margin:0 0 4vh 0; }
    .card-area { width:100%; max-width:520px; text-align:center; }

    .big-card {
      background:white;
      border-radius:18px;
      padding:6vh 4vw;
      box-shadow:0 8px 24px rgba(10,10,20,0.08);
      min-height:22vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:7vw;
      line-height:1.15;
      direction:rtl;
      margin-bottom:4vh;
      border: 1px solid rgba(0,0,0,0.06);
      word-break: break-word;
    }

    .controls {
      width:100%;
      display:flex;
      flex-direction:column;
      gap:3vh;
      align-items:center;
    }

    input[type="number"] {
      font-size:6.5vw;
      padding:2.5vh 3vw;
      border-radius:12px;
      border:1px solid rgba(0,0,0,0.12);
      width:45%;
      text-align:center;
    }

    .btn {
      width:100%;
      max-width:520px;
      background: linear-gradient(180deg,var(--primary),var(--accent));
      color:white;
      border:none;
      border-radius:16px;
      padding:3.2vh 3vw;
      font-size:7vw;
      box-shadow:0 8px 24px rgba(11,132,255,0.18);
      cursor:pointer;
      touch-action:manipulation;
    }
    .btn:active { transform:scale(0.99); }

    .small-note { font-size:3.8vw; color:#666; margin-top:2vh; }

    /* final screen */
    .final-screen {
      display:flex;
      flex-direction:column;
      gap:2vh;
      align-items:center;
    }
    .muted { color:#777; font-size:4.2vw; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>๐ฒ ุฎุงุฑุฌ ุงูููุถูุน</h1>

    <div id="setup" class="card-area">
      <div class="big-card" style="font-size:5.5vw;min-height:16vh;">
        ุญุฏุฏ ุนุฏุฏ ุงููุงุนุจูู ุซู ุฅุถุบุท ุงุจุฏุฃ โ ูุฑุฑ ุงููุงุชู ุจุนุฏ ูู ูุดู
      </div>
      <div class="controls">
        <input id="players" type="number" min="3" max="15" value="5" inputmode="numeric" />
        <button class="btn" onclick="startGame()">ุงุจุฏุฃ ุงููุนุจุฉ</button>
        <div class="small-note">ุฃุฏุฎู ุนุฏุฏ 3โ15. ูู ุฌููุฉ ููุดู ูุงุนุจ ูุงุญุฏ ุซู ููุฑุฑ ุงููุงุชู.</div>
      </div>
    </div>

    <div id="game" class="card-area hidden">
      <div style="display:flex;justify-content:space-between;align-items:center;width:100%;margin-bottom:2vh;">
        <div style="font-size:4.5vw;">ุงูุฏูุฑ ุฑูู</div>
        <div id="turn" style="font-size:5.5vw;font-weight:700;">1</div>
      </div>

      <div id="card" class="big-card">ุฅุถุบุท ุงูุฒุฑ ูุจุฏุก ุงููุดู</div>

      <div class="controls">
        <button id="actionBtn" class="btn" onclick="nextAction()">ุงูุดู</button>
      </div>
    </div>

    <div id="end" class="card-area hidden">
      <div class="big-card" style="font-size:6.5vw;min-height:18vh;">
        ุงูุชูุช ุงูุฃุฏูุงุฑ!
      </div>
      <div class="final-screen">
        <div class="muted">ุงูููุถูุน ูุงู:</div>
        <div id="finalSubject" style="font-size:6.5vw;font-weight:700"></div>
        <div class="muted">ูุงุนุจ/ูุฉ ุฎุงุฑุฌ ุงูููุถูุน: <span id="finalOff" style="font-weight:700"></span></div>
        <button class="btn" onclick="restart()">ุงุจุฏุฃ ูุฑุฉ ุฃุฎุฑู</button>
      </div>
    </div>
  </div>

  <script>
    const subjects = [
      /* expanded Algerian-Arabic subject list (mix of dialectal words & places/food/culture) */
      "ูุฑุฉ ุงููุฏู", "ุงูุดูุงูุฉ", "ุงูููุณููุณู", "ุงูุจูุฑุงู", "ุงูุจุฑูู", "ุงูุทุงุฌูู",
      "ุงูุดุฎุดูุฎุฉ", "ุงููุญุงุฌุจ", "ุงูููุฑูุถ", "ุงูุฒูุงุจูุฉ", "ุงูุดููุฏุฑ", "ุงูุฒุฑูุฌุฉ",
      "ุงููููุฉ ุจุงููุนููุฉ", "ุงูุดุงู ุจุงููุนูุงุน", "ุงูุญุฑูุฑุฉ", "ุงููููุฎูุฉ",
      "ุงููุณุฑุฉ", "ุงููููู", "ุงูุจุบุฑูุฑ", "ุงูุฌููุจุงู", "ุงูุญูุต", "ุงูููู",
      "ุงููุณูู", "ุงูููุฑุฉ", "ุงูุชูุฑ", "ุงูุฒูุชูู", "ุงููุดูุด", "ุงููููููุชูู",
      "ุดุจุงู ุงูุทุงูุณู", "ุงูุชุฑุงููุงู", "ุงูููุชุฑู", "ุงูุทุฑูู ุงูุณุฑูุนุฉ", "ุงููุตุจุฉ",
      "ุณูู ุงูุฌูุนุฉ", "ูุณูุทููุฉ", "ููุฑุงู", "ุชููุฑุงุณุช", "ุนูุงุจุฉ", "ุจุฌุงูุฉ",
      "ุชูุฒู ูุฒู", "ุงูุญุฑุงุด", "ุงูุนููุงุดุฉ", "ุงูุณููุงู", "ุงูููุนุจ", "ุงููููู",
      "ุฃู ููุซูู (ุงูุทุฑุจ)", "ุงูุฑุงู", "ุงููุงููู", "ุงูุดูุฎ", "ุงูุฏููุงูุฉ",
      "ุงูุนุฑุณ", "ุงูุฎุทูุจุฉ", "ุงูุนูููุฉ", "ุงูุฎุชุงู", "ุฑูุถุงู", "ุงูุนูุฏ ุงููุจูุฑ",
      "ุงูุนูุฏ ุงูุตุบูุฑ", "ุงูุณุญูุฑ", "ุงูุฅูุทุงุฑ", "ุงูุดูุงุจ", "ุงููุฌูุฉ", "ุงูุตุญุฑุงุก",
      "ุงูููุงุฑ", "ุงููุซุจุงู", "ุงููุงุญุฉ", "ุงูุจุญุฑ", "ุงูุณูู ุงููุดูู", "ุงูุณุฑุฏูู",
      "ุงููุญู ุงููุดูู", "ุงููุณูุฑูุท", "ุงูุจุทุงุทุง ููููุฉ", "ุงููุทุจุฎ ุชุงุนู", "ุงูุจุงุฑูููุบ",
      "ุงูุดุฑุทุฉ", "ุงูุทุจูุจ", "ุงููุฏุฑุณุฉ", "ุงูุฌุงูุนุฉ", "ุงูููุธู", "ุงููููู ุงูุดุนุจู",
      "ููุฏุฌ", "ุงูุจูุถุฉ", "ุงูุณุงุนุฉ", "ุงููุงุชู", "ุงูุดุจูุฉ", "ุงูุจุทุงุฑูุฉ",
      "ุงูููุงุฑ", "ุงูููู", "ุงูููุทูุฉ ุงูุตูุงุนูุฉ", "ุงูุดุงุทุฆ", "ุงูุญุฏููุฉ", "ุงูุดุงุฑุน ุงูุฑุฆูุณู",
      "ุงูุฑุงุชุจ", "ุงููุดุฑูุน", "ุงูููุงูุฉ", "ุงููุฑุงุกุฉ", "ุงูุณุจุงุญุฉ", "ุงูุบูุชุงุฑ",
      "ุงูุจูุงูู", "ุงูุฑุณู", "ุงูุณูููุง", "ุงููุณูุณู", "ุงูุฃููู", "ุงูููููุฏูุง"
    ];

    let players = 0;
    let currentPlayer = 1;
    let subject = "";
    let offSubject = 0;
    let revealed = false;

    function startGame() {
      const raw = parseInt(document.getElementById("players").value, 10);
      // validation & fallback
      if (isNaN(raw) || raw < 3) {
        players = 5;
      } else if (raw > 15) {
        players = 15;
      } else {
        players = raw;
      }

      // choose subject and pick one player to be "off subject"
      subject = subjects[Math.floor(Math.random() * subjects.length)];
      offSubject = Math.floor(Math.random() * players) + 1; // 1..players

      currentPlayer = 1;
      revealed = false;

      // show/hide panels
      document.getElementById("setup").classList.add("hidden");
      document.getElementById("end").classList.add("hidden");
      document.getElementById("game").classList.remove("hidden");

      document.getElementById("turn").textContent = currentPlayer;
      document.getElementById("card").textContent = "ุฅุถุบุท ุงูุฒุฑ ูุจุฏุก ุงููุดู";
      document.getElementById("actionBtn").textContent = "ุงูุดู";

      // small accessibility: focus button for faster tapping
      document.getElementById("actionBtn").focus();
    }

    function nextAction() {
      const card = document.getElementById("card");
      const btn = document.getElementById("actionBtn");

      if (!revealed) {
        // Reveal role for current player
        if (currentPlayer === offSubject) {
          card.textContent = "โ ุฎุงุฑุฌ ุงูููุถูุน";
        } else {
          // show subject (short label)
          card.textContent = "โ ุงูููุถูุน: " + subject;
        }
        btn.textContent = "ุงูุชุงูู";
        revealed = true;
      } else {
        // Move to next player or finish
        if (currentPlayer < players) {
          currentPlayer++;
          document.getElementById("turn").textContent = currentPlayer;
          card.textContent = "ุฅุถุบุท ุงูุฒุฑ ูููุดู";
          btn.textContent = "ุงูุดู";
          revealed = false;
        } else {
          // finished all players โ show final screen with summary
          document.getElementById("game").classList.add("hidden");
          document.getElementById("end").classList.remove("hidden");

          document.getElementById("finalSubject").textContent = subject;
          document.getElementById("finalOff").textContent = offSubject + " / " + players;
        }
      }
    }

    function restart() {
      // simple restart: go back to setup
      document.getElementById("end").classList.add("hidden");
      document.getElementById("game").classList.add("hidden");
      document.getElementById("setup").classList.remove("hidden");
    }
  </script>
</body>
</html>